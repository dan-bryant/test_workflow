name: VS2022 X64 CMD CI Build

on:
  workflow_dispatch: # Allows the workflow to be triggered manually

jobs:
  install:
    runs-on: windows-2022 # Use the Windows Server 2022 runner
    defaults:
      run:
        shell: cmd        
    steps:
      - name: Install NASM
        run: choco install nasm -y

      - name: Install IASL
        run: choco install iasl -y

      - name: Find IASL
        env:
          IASL_PREFIX: C:\ProgramData\chocolatey\bin\
        run: dir /s/b "%IASL_PREFIX%\iasl.exe"

      - name: Find CLANG
        env:
          CLANG_BIN: C:\Program Files\LLVM\bin\
        run: dir /s/b "%CLANG_BIN%\clang.exe"

      - name: Find NASM
        env:
          NASM_PREFIX: C:\Program Files\NASM\
        run: dir /s/b "%NASM_PREFIX%\nasm.exe"

      - name: Create VENV
        run: python -m venv .venv

      - name: savegame
        env:
          IASL_PREFIX: C:\ProgramData\chocolatey\bin\
          CLANG_BIN: C:\Program Files\LLVM\bin\
          NASM_PREFIX: C:\Program Files\NASM\
          CHAIN: VS2022
          ARCH: X64
          TRGT: DEBUG
        continue-on-error: true
        run: echo "%CD%"

              
